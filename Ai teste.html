<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Jogo de Damas</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { border-collapse: collapse; margin: 20px auto; }
        td {
            width: 50px; height: 50px;
            text-align: center; vertical-align: middle;
            font-size: 32px; cursor: pointer;
        }
        .black { background: #444; }
        .white { background: #eee; }
        .piece-red { color: red; }
        .piece-black { color: black; }
        .piece-enemy { color: blue; } /* Nova cor para o time inimigo */
        #turn { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Jogo de Damas</h1>
    <div id="turn">Vez: <span id="player">Vermelho</span></div>
    <table id="board"></table>
    <script>
        const SIZE = 8;
        const board = [];
        const table = document.getElementById('board');
        let selected = null;
        let turn = 'red';

        function createBoard() {
            for (let i = 0; i < SIZE; i++) {
                board[i] = [];
                const row = table.insertRow();
                for (let j = 0; j < SIZE; j++) {
                    const cell = row.insertCell();
                    cell.className = (i + j) % 2 === 0 ? 'white' : 'black';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    if ((i < 3) && cell.className === 'black') {
                        board[i][j] = 'black';
                        cell.innerHTML = '<span class="piece-enemy">&#9899;</span>'; // inimigo azul
                    } else if ((i > 4) && cell.className === 'black') {
                        board[i][j] = 'red';
                        cell.innerHTML = '<span class="piece-red">&#9899;</span>';
                    } else {
                        board[i][j] = null;
                    }
                    cell.onclick = () => handleClick(i, j);
                }
            }
        }

        function handleClick(i, j) {
            if (selected) {
                movePiece(selected.i, selected.j, i, j);
                selected = null;
                highlight();
            } else if (board[i][j] === turn) {
                selected = { i, j };
                highlight(i, j);
            }
        }

        function highlight(si, sj) {
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    table.rows[r].cells[c].style.outline = '';
                }
            }
            if (si !== undefined && sj !== undefined) {
                table.rows[si].cells[sj].style.outline = '2px solid yellow';
            }
        }

        function movePiece(fromI, fromJ, toI, toJ) {
            if (!isValidMove(fromI, fromJ, toI, toJ)) return;
            board[toI][toJ] = board[fromI][fromJ];
            board[fromI][fromJ] = null;
            // Captura
            if (Math.abs(toI - fromI) === 2) {
                const capI = (fromI + toI) / 2;
                const capJ = (fromJ + toJ) / 2;
                board[capI][capJ] = null;
            }
            renderBoard();
            turn = turn === 'red' ? 'black' : 'red';
            document.getElementById('player').textContent = turn === 'red' ? 'Vermelho' : 'Preto';
        }

        function isValidMove(fromI, fromJ, toI, toJ) {
            if (board[toI][toJ]) return false;
            const dir = turn === 'red' ? -1 : 1;
            // Movimento simples
            if (toI === fromI + dir && Math.abs(toJ - fromJ) === 1) return true;
            // Captura
            if (toI === fromI + dir * 2 && Math.abs(toJ - fromJ) === 2) {
                const midI = (fromI + toI) / 2;
                const midJ = (fromJ + toJ) / 2;
                return board[midI][midJ] && board[midI][midJ] !== turn;
            }
            return false;
        }

        function renderBoard() {
            for (let i = 0; i < SIZE; i++) {
                for (let j = 0; j < SIZE; j++) {
                    const cell = table.rows[i].cells[j];
                    cell.innerHTML = '';
                    if (board[i][j] === 'red') {
                        cell.innerHTML = '<span class="piece-red">&#9899;</span>';
                    } else if (board[i][j] === 'black') {
                        cell.innerHTML = '<span class="piece-enemy">&#9899;</span>'; // inimigo azul
                    }
                }
            }
        }

        createBoard();
    </script>
</body>
</html>